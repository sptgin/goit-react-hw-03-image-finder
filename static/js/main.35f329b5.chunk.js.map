{"version":3,"sources":["services/api.js","components/ImageGalleryItem.js","components/Modal.js","components/ImageGallery.js","components/Searchbar.js","App.js","index.js"],"names":["API","this","api_key","api_url","api_type","api_orientation","_searchQuery","_page","value","a","url","searchQuery","axios","get","result","data","message","ImageGalleryItem","props","item","webformatURL","largeImageURL","tags","className","src","alt","onClick","handleImageClick","PureComponent","modalRoot","document","querySelector","Modal","handleOverlayclick","e","target","currentTarget","onModalClose","handleEscKey","code","window","addEventListener","removeEventListener","createPortal","Component","imagesearch","imageSearchAPI","ImageGallery","state","searchResultArray","serchHits","status","imageLargeURL","errorMessage","handleClick","page","search","then","setState","prev","hits","scrollTo","top","documentElement","scrollHeight","behavior","catch","er","prevProps","prevState","resetPage","searchResults","length","total","console","log","map","el","id","type","title","text","Searchbar","searchImage","handlerChange","event","onSubmit","preventDefault","trim","alert","placeholder","onChange","App","input","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.35f329b5.chunk.js","sourcesContent":["import axios from 'axios';\nexport default class API {\n  constructor() {\n    this.api_key = '5018958-ed49ccd90878e6614abdf24a6';\n    this.api_url = 'https://pixabay.com/api/';\n    this.api_type = 'image_type=photo';\n    this.api_orientation = 'orientation=horizontal';\n    this._searchQuery = '';\n    this._page = 1;\n  }\n  get searchQuery() {\n    return this._searchQuery;\n  }\n  set searchQuery(value) {\n    return (this._searchQuery = value);\n  }\n  get page() {\n    return this._page;\n  }\n  set page(value) {\n    return (this._page += value);\n  }\n  resetPage() {\n    return (this._page = 1);\n  }\n  async search() {\n    let url = `${this.api_url}?${this.api_type}&${this.api_orientation}&q=${this.searchQuery}&page=${this._page}&per_page=15&key=${this.api_key}\n`;\n    try {\n      const result = await axios.get(url);\n      const data = result.data;\n      return data;\n    } catch (err) {\n      return err.message;\n    }\n  }\n}\n","import { PureComponent } from 'react';\n\nexport default class ImageGalleryItem extends PureComponent {\n  render() {\n    const { webformatURL, largeImageURL, tags } = this.props.item;\n    return (\n      <li className=\"ImageGalleryItem\">\n        <img\n          src={webformatURL}\n          alt={tags}\n          onClick={() => this.props.handleImageClick(largeImageURL)}\n          className=\"ImageGalleryItem-image\"\n        />\n      </li>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleEscKey);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleEscKey);\n  }\n  handleOverlayclick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onModalClose();\n    }\n  };\n  handleEscKey = e => {\n    if (e.code === 'Escape') {\n      this.props.onModalClose();\n    }\n  };\n  render() {\n    const { largeImageURL } = this.props;\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleOverlayclick}>\n        <div className=\"Modal\">\n          <img src={largeImageURL} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import { Component } from 'react';\nimport imageSearchAPI from '../services/api';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport Modal from './Modal';\nimport { Notification } from 'react-pnotify';\n\nconst imagesearch = new imageSearchAPI();\n\nexport default class ImageGallery extends Component {\n  state = {\n    searchResultArray: [],\n    serchHits: null,\n    status: 'init',\n    imageLargeURL: '',\n    errorMessage: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps !== this.props) {\n      this.setState({ status: 'pending' });\n      imagesearch.resetPage();\n      imagesearch.searchQuery = this.props.searchQuery;\n      imagesearch.search().then(searchResults => {\n        if (searchResults.hits.length > 0) {\n          this.setState({\n            searchResults: searchResults.hits,\n            serchHits: searchResults.total,\n            status: 'success',\n          });\n        } else {\n          this.setState({ status: 'error', errorMessage: 'Nothing found!' });\n        }\n      });\n    }\n  }\n\n  handleClick = e => {\n    imagesearch.page = 1;\n    imagesearch\n      .search()\n      .then(searchResultArray => {\n        this.setState(prev => ({\n          searchResultArray: [\n            ...prev.searchResultArray,\n            ...searchResultArray.hits,\n          ],\n          status: 'success',\n        }));\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      })\n      .catch(er => {\n        this.setState({ status: 'error', errorMessage: er });\n      });\n  };\n\n  render() {\n    const {\n      status,\n      searchResultArray,\n      serchHits,\n      imageLargeURL,\n      errorMessage,\n    } = this.state;\n\n    console.log();\n\n    if (status === 'init') {\n      return <h2 className=\"title\"></h2>;\n    }\n    if (status === 'pending') {\n      return <h2 className=\"title\">Loading ...</h2>;\n    }\n    if (status === 'success') {\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            {searchResultArray.map(el => (\n              <ImageGalleryItem\n                key={el.id}\n                item={el}\n                handleImageClick={this.handleImageClick}\n              />\n            ))}\n          </ul>\n          {serchHits > 15 && (\n            <button\n              className=\"Button\"\n              type=\"button\"\n              id=\"more\"\n              onClick={this.handleClick}\n            >\n              load more\n            </button>\n          )}\n        </>\n      );\n    }\n\n    if (status === 'showmodal') {\n      return (\n        <Modal largeImageURL={imageLargeURL} onModalClose={this.onModalClose} />\n      );\n    }\n    if (status === 'error') {\n      return <Notification type=\"Error\" title=\"Error\" text={errorMessage} />;\n    }\n  }\n}\n","import PropTypes from 'prop-types';\nimport { Component } from 'react';\n\nexport default class Searchbar extends Component {\n  state = {\n    searchImage: '',\n  };\n\n  handlerChange = event => {\n    this.setState({ searchImage: event.target.value });\n  };\n\n  onSubmit = event => {\n    event.preventDefault();\n    if (this.state.searchImage.trim() === '') {\n      alert('Please, enter some for search image ... ');\n      return;\n    }\n    this.props.onSubmit(this.state.searchImage);\n    this.setState({ searchImage: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.onSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            value={this.state.searchImage}\n            type=\"search\"\n            placeholder=\"Search images and photos\"\n            onChange={this.handlerChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport ImageGallery from './components/ImageGallery';\nimport Searchbar from './components/Searchbar';\n\nclass App extends Component {\n  state = {\n    searchImage: '',\n  };\n\n  onSubmit = input => {\n    this.setState({\n      searchImage: input,\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.onSubmit} />\n        <ImageGallery searchQuery={this.state.searchImage} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}